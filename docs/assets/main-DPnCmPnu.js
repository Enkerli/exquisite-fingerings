(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();const f=11;function M(r){return r%2===0?6:5}const w=(()=>{const r=[0];for(let e=1;e<f;e++){const t=r[e-1];r.push(t+(e%2===1?4:3))}return r})();function N(r,e){return w[r]+e}function D(r,e,t=48){return t+N(r,e)}const E={portrait:{w:38,h:33}};function y(r,e,t=48){const n=E.portrait,i=e*n.w+(r%2?n.w/2:0)+t,s=(f-1-r)*n.h+t;return{x:i,y:s}}function C(r,e,t){return[[0,-t],[.866*t,-.5*t],[.866*t,.5*t],[0,+t],[-.866*t,.5*t],[-.866*t,-.5*t]].map(([i,s])=>`${r+i},${e+s}`).join(" ")}function A(r="portrait"){const e=E.portrait,t=6*e.w+120,n=f*e.h+120;return r==="portrait"?{width:t,height:n,viewBox:`0 0 ${t} ${n}`}:{width:n,height:t,viewBox:`0 0 ${n} ${t}`}}function B(r,e,t,n){const{x:i,y:s}=y(r,e),{x:a,y:c}=y(t,n);return Math.sqrt((a-i)**2+(c-s)**2)/E.portrait.w}const x={C:0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11},O={maj:{name:"Major scale",intervals:[0,2,4,5,7,9,11],type:"scale"},natmin:{name:"Natural minor",intervals:[0,2,3,5,7,8,10],type:"scale"},harmin:{name:"Harmonic minor",intervals:[0,2,3,5,7,8,11],type:"scale"},melmin:{name:"Melodic minor",intervals:[0,2,3,5,7,9,11],type:"scale"},dorian:{name:"Dorian",intervals:[0,2,3,5,7,9,10],type:"scale"},phrygian:{name:"Phrygian",intervals:[0,1,3,5,7,8,10],type:"scale"},lydian:{name:"Lydian",intervals:[0,2,4,6,7,9,11],type:"scale"},mixolydian:{name:"Mixolydian",intervals:[0,2,4,5,7,9,10],type:"scale"},locrian:{name:"Locrian",intervals:[0,1,3,5,6,8,10],type:"scale"},majpent:{name:"Major pentatonic",intervals:[0,2,4,7,9],type:"scale"},minpent:{name:"Minor pentatonic",intervals:[0,3,5,7,10],type:"scale"},majtriad:{name:"Major triad",intervals:[0,4,7],type:"chord"},mintriad:{name:"Minor triad",intervals:[0,3,7],type:"chord"},augtriad:{name:"Augmented triad",intervals:[0,4,8],type:"chord"},dimtriad:{name:"Diminished triad",intervals:[0,3,6],type:"chord"},maj7:{name:"Major 7th",intervals:[0,4,7,11],type:"chord"},min7:{name:"Minor 7th",intervals:[0,3,7,10],type:"chord"},dom7:{name:"Dominant 7th",intervals:[0,4,7,10],type:"chord"},dim7:{name:"Diminished 7th",intervals:[0,3,6,9],type:"chord"},hdim7:{name:"Half-diminished 7th",intervals:[0,3,6,10],type:"chord"},maj9:{name:"Major 9th",intervals:[0,4,7,11,14],type:"chord"},min9:{name:"Minor 9th",intervals:[0,3,7,10,14],type:"chord"},dom9:{name:"Dominant 9th",intervals:[0,4,7,10,14],type:"chord"},chromatic:{name:"Chromatic",intervals:[0,1,2,3,4,5,6,7,8,9,10,11],type:"scale"},wholeTone:{name:"Whole tone",intervals:[0,2,4,6,8,10],type:"scale"}};function H(r,e){const t=x[r];if(t===void 0)throw new Error(`Invalid key: ${r}`);const n=O[e];if(!n)throw new Error(`Invalid set type: ${e}`);const i=new Set;for(const s of n.intervals)i.add((t+s)%12);return i}function L(r){const e=new Set;return!r||!r.trim()||r.split(",").forEach(t=>{const n=Number(t.trim());Number.isNaN(n)||e.add((n%12+12)%12)}),e}function I(r){return(r%12+12)%12}class R{constructor(e){this.svg=e,this.orientation="portrait",this.labelMode="pc",this.baseMidi=48,this.highlightedPCs=new Set,this.fingeringPattern=null,this.fingeringMode=!1,this.onPadClick=null}setOrientation(e){this.orientation=e}setLabelMode(e){this.labelMode=e}setBaseMidi(e){this.baseMidi=e}setHighlightedPCs(e){this.highlightedPCs=e}setFingeringPattern(e){this.fingeringPattern=e}setFingeringMode(e){this.fingeringMode=e}setPadClickHandler(e){this.onPadClick=e}render(){const e=A(this.orientation);this.svg.setAttribute("viewBox",e.viewBox),this.svg.innerHTML="";const t=document.createElementNS("http://www.w3.org/2000/svg","g");this.orientation==="landscape"&&t.setAttribute("transform",`translate(${e.width},0) rotate(90)`);for(let n=0;n<f;n++){const i=M(n);for(let s=0;s<i;s++)this._renderPad(t,n,s)}this.svg.appendChild(t)}_renderPad(e,t,n){const{x:i,y:s}=y(t,n),a=D(t,n,this.baseMidi),c=I(a),d=document.createElementNS("http://www.w3.org/2000/svg","polygon");if(d.setAttribute("points",C(i,s,22)),d.setAttribute("class","pad"),d.setAttribute("stroke","#666"),d.setAttribute("fill","#6aa5ff"),d.setAttribute("fill-opacity","0.12"),this.highlightedPCs.has(c)&&d.classList.add("on"),this.fingeringMode&&d.classList.add("fingering-mode"),d.addEventListener("click",()=>{this.onPadClick&&this.onPadClick(t,n,a,c)}),e.appendChild(d),this._renderLabel(e,i,s,a,c),this.fingeringPattern){const o=this.fingeringPattern.getFingering(t,n);o&&this._renderFingering(e,i,s,o)}}_renderLabel(e,t,n,i,s){const a=this._getLabelText(i,s),c=document.createElementNS("http://www.w3.org/2000/svg","text");c.setAttribute("x",t),c.setAttribute("y",n+4),c.setAttribute("text-anchor","middle"),c.setAttribute("class","label"),this.orientation==="landscape"&&c.setAttribute("transform",`rotate(-90 ${t} ${n})`),c.textContent=a,e.appendChild(c)}_renderFingering(e,t,n,i){const s=document.createElementNS("http://www.w3.org/2000/svg","text");s.setAttribute("x",t),s.setAttribute("y",n-8),s.setAttribute("text-anchor","middle"),s.setAttribute("class",`fing ${i.hand}`),this.orientation==="landscape"&&s.setAttribute("transform",`rotate(-90 ${t} ${n})`),s.textContent=i.finger,e.appendChild(s)}_getLabelText(e,t){switch(this.labelMode){case"pc":return t;case"note":return this._midiToNoteName(e);case"midi":return e;default:return t}}_midiToNoteName(e){const t=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],n=I(e);return t[n]}}class T{constructor(){this.midiAccess=null,this.selectedOutput=null,this.isSupported=typeof navigator<"u"&&"requestMIDIAccess"in navigator,this.activeNotes=new Map,this.holdDuration=1e3,this.octaveRange=0,this.isHolding=!1}async init(){if(!this.isSupported)throw new Error("WebMIDI not supported in this browser");try{return this.midiAccess=await navigator.requestMIDIAccess(),this.midiAccess.onstatechange=()=>{this._onDeviceStateChange()},!0}catch(e){throw new Error(`MIDI initialization failed: ${e.message}`)}}getOutputDevices(){return this.midiAccess?Array.from(this.midiAccess.outputs.values()).map(e=>({id:e.id,name:e.name})):[]}selectOutputDevice(e){if(!this.midiAccess)return!1;const t=this.midiAccess.outputs.get(e);return t?(this.selectedOutput=t,!0):!1}setHoldDuration(e){this.holdDuration=Math.max(100,Math.min(e,3e4))}setOctaveRange(e){this.octaveRange=Math.max(0,Math.min(e,2))}noteOn(e,t=100){if(!(!this.selectedOutput||e<0||e>127))try{this.selectedOutput.send([144,e,t])}catch(n){console.error("MIDI send error:",n)}}noteOff(e){if(!(!this.selectedOutput||e<0||e>127))try{this.selectedOutput.send([128,e,0])}catch(t){console.error("MIDI send error:",t)}}playNote(e,t=100,n=null){const i=n!==null?n:this.holdDuration;this._getOctaveNotes(e).forEach(a=>{this.noteOn(a,t),this.isHolding?this.activeNotes.set(a,{velocity:t,time:Date.now()}):setTimeout(()=>{this.noteOff(a)},i)})}playChord(e,t=100,n=null,i=0){e.forEach((s,a)=>{setTimeout(()=>{this.playNote(s,t,n)},a*i)})}enableHold(){this.isHolding=!0,this.activeNotes.clear()}disableHold(){this.isHolding=!1,this.releaseAllNotes()}releaseAllNotes(){for(const[e]of this.activeNotes)this.noteOff(e);this.activeNotes.clear()}allNotesOff(){if(this.selectedOutput){try{for(let e=0;e<16;e++)this.selectedOutput.send([176+e,123,0])}catch(e){console.error("MIDI send error:",e)}this.activeNotes.clear()}}_getOctaveNotes(e){const t=[e];for(let n=1;n<=this.octaveRange;n++){const i=e+12*n,s=e-12*n;i<=127&&t.push(i),s>=0&&t.push(s)}return t}_onDeviceStateChange(){this.selectedOutput&&(this.midiAccess.outputs.get(this.selectedOutput.id)||(this.selectedOutput=null))}getStatus(){var e;return{isSupported:this.isSupported,isInitialized:this.midiAccess!==null,hasDevice:this.selectedOutput!==null,deviceName:((e=this.selectedOutput)==null?void 0:e.name)||null,isHolding:this.isHolding,activeNoteCount:this.activeNotes.size,holdDuration:this.holdDuration,octaveRange:this.octaveRange}}}const u=new T;class m{constructor(e="Untitled"){this.name=e,this.fingerings=new Map,this.metadata={key:null,setType:null,baseMidi:48,createdAt:Date.now(),modifiedAt:Date.now()}}setFingering(e,t,n,i){const s=`${e},${t}`;this.fingerings.set(s,{hand:n,finger:i}),this.metadata.modifiedAt=Date.now()}getFingering(e,t){const n=`${e},${t}`;return this.fingerings.get(n)||null}removeFingering(e,t){const n=`${e},${t}`;this.fingerings.delete(n),this.metadata.modifiedAt=Date.now()}clearAll(){this.fingerings.clear(),this.metadata.modifiedAt=Date.now()}getPadsForHand(e){const t=[];for(const[n,i]of this.fingerings)if(i.hand===e){const[s,a]=n.split(",").map(Number);t.push({row:s,col:a,finger:i.finger})}return t}getPadsForFinger(e,t=null){const n=[];for(const[i,s]of this.fingerings)if(s.finger===e&&(!t||s.hand===t)){const[a,c]=i.split(",").map(Number);n.push({row:a,col:c,hand:s.hand})}return n}toJSON(){return{name:this.name,fingerings:Array.from(this.fingerings.entries()),metadata:this.metadata}}static fromJSON(e){const t=new m(e.name);return t.fingerings=new Map(e.fingerings),t.metadata=e.metadata,t}}class F{constructor(){this.fingerWeights={1:.8,2:1,3:.9,4:.6,5:.4},this.handSizes={small:{maxStretch:2.5,comfortableStretch:1.5},medium:{maxStretch:3,comfortableStretch:2},large:{maxStretch:3.5,comfortableStretch:2.5}},this.currentHandSize="medium"}setHandSize(e){this.handSizes[e]&&(this.currentHandSize=e)}analyzePattern(e){let t=100;const n=[];return["left","right"].forEach(i=>{const s=e.getPadsForHand(i);if(s.length===0)return;const a=this._analyzeSpan(s,i,n);t-=a;const c=this._analyzeFingerStrength(s,n);t+=c;const d=this._analyzeFingerCrossings(s,i,n);t-=d}),{score:Math.max(0,Math.min(100,t)),issues:n,recommendation:this._getRecommendation(t)}}suggestFingerings(e,t){if(e.length===0)return[];if(e.length>5)return this._suggestMultiHandFingering(e);const n=[...e].sort((s,a)=>s.row!==a.row?s.row-a.row:s.col-a.col),i=t==="left"?[1,2,3,4,5]:[5,4,3,2,1];return n.map((s,a)=>({row:s.row,col:s.col,hand:t,finger:i[a]||5,score:.8}))}_analyzeSpan(e,t,n){const i=this.handSizes[this.currentHandSize];let s=0;for(let a=0;a<e.length;a++)for(let c=a+1;c<e.length;c++){const d=B(e[a].row,e[a].col,e[c].row,e[c].col);d>i.maxStretch?(s+=20,n.push({type:"excessive_stretch",hand:t,fingers:[e[a].finger,e[c].finger],distance:d})):d>i.comfortableStretch&&(s+=5,n.push({type:"uncomfortable_stretch",hand:t,fingers:[e[a].finger,e[c].finger],distance:d}))}return s}_analyzeFingerStrength(e,t){let n=0;return e.forEach(i=>{const s=this.fingerWeights[i.finger];s>=.9?n+=2:s<=.5&&(n-=1)}),n}_analyzeFingerCrossings(e,t,n){let i=0;for(let s=0;s<e.length-1;s++)for(let a=s+1;a<e.length;a++){const c=e[s],d=e[a];c.row<d.row&&c.finger>d.finger&&(i+=10,n.push({type:"finger_crossing",hand:t,fingers:[c.finger,d.finger]}))}return i}_getRecommendation(e){return e>=90?"Excellent ergonomics!":e>=75?"Good fingering, comfortable to play":e>=60?"Acceptable, but could be improved":e>=40?"Uncomfortable, consider revising":"Poor ergonomics, recommend different fingering"}_suggestMultiHandFingering(e){const t=Math.floor(e.length/2),n=e.slice(0,t),i=e.slice(t);return[...this.suggestFingerings(n,"left"),...this.suggestFingerings(i,"right")]}}const v=new F,g={PATTERNS:"exquisPatterns",SETTINGS:"exquisSettings",RECENT_PATTERNS:"exquisRecentPatterns"};function $(r,e){const t=p();t[r]={...e,savedAt:Date.now()},localStorage.setItem(g.PATTERNS,JSON.stringify(t)),q(r)}function _(r){return p()[r]||null}function k(r){const e=p();return e[r]?(delete e[r],localStorage.setItem(g.PATTERNS,JSON.stringify(e)),G(r),!0):!1}function p(){try{const r=localStorage.getItem(g.PATTERNS);return r?JSON.parse(r):{}}catch(r){return console.error("Error loading patterns:",r),{}}}function z(){return Object.keys(p()).sort()}function h(r){localStorage.setItem(g.SETTINGS,JSON.stringify(r))}function j(){try{const r=localStorage.getItem(g.SETTINGS);return r?JSON.parse(r):S()}catch(r){return console.error("Error loading settings:",r),S()}}function S(){return{orientation:"portrait",labelMode:"pc",baseMidi:48,midiHoldDuration:1e3,midiOctaveRange:0,handSize:"medium",theme:"light"}}function q(r){let e=b();e=e.filter(t=>t!==r),e.unshift(r),e=e.slice(0,10),localStorage.setItem(g.RECENT_PATTERNS,JSON.stringify(e))}function G(r){let e=b();e=e.filter(t=>t!==r),localStorage.setItem(g.RECENT_PATTERNS,JSON.stringify(e))}function b(){try{const r=localStorage.getItem(g.RECENT_PATTERNS);return r?JSON.parse(r):[]}catch{return[]}}class J{constructor(){this.settings=j(),this.currentPattern=new m,this.currentFinger=1,this.currentHand="right",this.fingeringMode=!1,this.gridElement=document.getElementById("grid"),this.gridRenderer=new R(this.gridElement),this.initUI(),this.loadStoredSettings(),this.render()}initUI(){var a,c,d;document.querySelectorAll('input[name="ori"]').forEach(o=>{o.addEventListener("change",()=>{this.settings.orientation=o.value,this.render(),h(this.settings)})}),document.querySelectorAll('input[name="lab"]').forEach(o=>{o.addEventListener("change",()=>{this.settings.labelMode=o.value,this.render(),h(this.settings)})}),document.getElementById("key").addEventListener("change",()=>this.render()),document.getElementById("set").addEventListener("change",o=>{const l=o.target.value==="custom";document.getElementById("customPC").disabled=!l,this.render()}),document.getElementById("customPC").addEventListener("input",()=>this.render()),document.getElementById("baseMidi").addEventListener("input",o=>{this.settings.baseMidi=parseInt(o.target.value),this.render(),h(this.settings)}),document.getElementById("fingeringMode").addEventListener("change",o=>{this.fingeringMode=o.target.checked,document.getElementById("fingeringModeInfo").style.display=this.fingeringMode?"block":"none",document.querySelectorAll(".finger-btn").forEach(l=>{l.disabled=!this.fingeringMode}),this.render()}),document.getElementById("fingeringHand").addEventListener("change",o=>{this.currentHand=o.target.value});for(let o=1;o<=5;o++)document.getElementById(`fingBtn${o}`).addEventListener("click",()=>{this.currentFinger=o,this.updateFingerButtonState()});document.addEventListener("keydown",o=>{this.fingeringMode&&o.key>="1"&&o.key<="5"&&(this.currentFinger=parseInt(o.key),this.updateFingerButtonState())}),document.getElementById("clearFingerings").addEventListener("click",()=>{this.currentPattern.clearAll(),this.render()}),document.getElementById("savePattern").addEventListener("click",()=>this.saveCurrentPattern()),document.getElementById("loadPattern").addEventListener("change",o=>{o.target.value&&this.loadPatternByName(o.target.value)}),document.getElementById("deletePattern").addEventListener("click",()=>this.deleteCurrentPattern()),document.getElementById("enableMidi").addEventListener("click",()=>this.initMIDI()),document.getElementById("midiDevice").addEventListener("change",o=>{o.target.value&&(u.selectOutputDevice(o.target.value),this.updateMIDIStatus())});const e=document.getElementById("midiHoldDuration"),t=document.getElementById("holdDurationValue");e==null||e.addEventListener("input",o=>{const l=parseInt(o.target.value);t.textContent=`${(l/1e3).toFixed(1)}s`,u.setHoldDuration(l),this.settings.midiHoldDuration=l,h(this.settings)});const n=document.getElementById("midiOctaveRange"),i=document.getElementById("octaveRangeValue");n==null||n.addEventListener("input",o=>{const l=parseInt(o.target.value);i.textContent=l===0?"0 (none)":`±${l}`,u.setOctaveRange(l),this.settings.midiOctaveRange=l,h(this.settings)});const s=document.getElementById("midiHoldToggle");s==null||s.addEventListener("change",o=>{o.target.checked?(u.enableHold(),this.sendHighlightedNotes()):u.disableHold()}),(a=document.getElementById("midiSendHighlighted"))==null||a.addEventListener("click",()=>{this.sendHighlightedNotes()}),(c=document.getElementById("analyzeErgo"))==null||c.addEventListener("click",()=>{this.analyzeErgonomics()}),(d=document.getElementById("handSize"))==null||d.addEventListener("change",o=>{v.setHandSize(o.target.value),this.settings.handSize=o.target.value,h(this.settings)}),this.gridRenderer.setPadClickHandler((o,l,P,W)=>{this.fingeringMode?this.handleFingeringClick(o,l):u.playNote(P)})}loadStoredSettings(){document.querySelector(`input[name="ori"][value="${this.settings.orientation}"]`).checked=!0,document.querySelector(`input[name="lab"][value="${this.settings.labelMode}"]`).checked=!0,document.getElementById("baseMidi").value=this.settings.baseMidi;const e=document.getElementById("midiHoldDuration");e&&(e.value=this.settings.midiHoldDuration,document.getElementById("holdDurationValue").textContent=`${(this.settings.midiHoldDuration/1e3).toFixed(1)}s`,u.setHoldDuration(this.settings.midiHoldDuration));const t=document.getElementById("midiOctaveRange");if(t){t.value=this.settings.midiOctaveRange;const i=this.settings.midiOctaveRange;document.getElementById("octaveRangeValue").textContent=i===0?"0 (none)":`±${i}`,u.setOctaveRange(i)}const n=document.getElementById("handSize");n&&(n.value=this.settings.handSize,v.setHandSize(this.settings.handSize)),this.updatePatternList()}render(){this.gridRenderer.setOrientation(this.settings.orientation),this.gridRenderer.setLabelMode(this.settings.labelMode),this.gridRenderer.setBaseMidi(this.settings.baseMidi),this.gridRenderer.setHighlightedPCs(this.getHighlightedPCs()),this.gridRenderer.setFingeringPattern(this.currentPattern),this.gridRenderer.setFingeringMode(this.fingeringMode),this.gridRenderer.render()}getHighlightedPCs(){const e=document.getElementById("set").value;if(e==="custom"){const t=document.getElementById("customPC").value;return L(t)}else{const t=document.getElementById("key").value;return H(t,e)}}handleFingeringClick(e,t){const n=this.currentPattern.getFingering(e,t);n&&n.hand===this.currentHand&&n.finger===this.currentFinger?this.currentPattern.removeFingering(e,t):this.currentPattern.setFingering(e,t,this.currentHand,this.currentFinger),this.render()}updateFingerButtonState(){for(let e=1;e<=5;e++){const t=document.getElementById(`fingBtn${e}`);t.style.opacity=e===this.currentFinger?"1":"0.5"}}saveCurrentPattern(){const e=document.getElementById("patternName").value.trim();if(!e){alert("Please enter a pattern name");return}const t={...this.currentPattern.toJSON(),key:document.getElementById("key").value,set:document.getElementById("set").value,baseMidi:this.settings.baseMidi};$(e,t),this.updatePatternList(),document.getElementById("patternName").value="",alert(`Pattern "${e}" saved!`)}loadPatternByName(e){const t=_(e);if(!t){alert(`Pattern "${e}" not found`);return}this.currentPattern=m.fromJSON(t),document.getElementById("key").value=t.key,document.getElementById("set").value=t.set,this.settings.baseMidi=t.baseMidi,document.getElementById("baseMidi").value=t.baseMidi,this.render()}deleteCurrentPattern(){const e=document.getElementById("loadPattern").value;if(!e){alert("Please select a pattern to delete");return}confirm(`Delete pattern "${e}"?`)&&(k(e),this.updatePatternList(),document.getElementById("loadPattern").value="")}updatePatternList(){const e=document.getElementById("loadPattern"),t=z();e.innerHTML='<option value="">-- Select Pattern --</option>',t.forEach(n=>{const i=document.createElement("option");i.value=n,i.textContent=n,e.appendChild(i)})}async initMIDI(){try{await u.init(),this.updateMIDIDeviceList(),this.updateMIDIStatus()}catch(e){this.updateMIDIStatus(e.message)}}updateMIDIDeviceList(){const e=document.getElementById("midiDevice"),t=u.getOutputDevices();e.innerHTML='<option value="">-- Select device --</option>',t.forEach(n=>{const i=document.createElement("option");i.value=n.id,i.textContent=n.name,e.appendChild(i)}),e.disabled=t.length===0}updateMIDIStatus(e=null){const t=u.getStatus(),n=document.getElementById("midiStatus");e?(n.textContent=`Error: ${e}`,n.className="error-box"):t.isSupported?t.isInitialized?t.hasDevice?(n.textContent=`Connected: ${t.deviceName}`,n.className="success-box"):(n.textContent="MIDI ready - select a device",n.className="info-box"):(n.textContent="MIDI not initialized",n.className="warning-box"):(n.textContent="WebMIDI not supported (use Chrome/Brave/Edge)",n.className="warning-box")}sendHighlightedNotes(){const e=this.getHighlightedPCs(),t=[];for(let n=0;n<39;n++){const i=this.settings.baseMidi+n,s=i%12;e.has(s)&&t.push(i)}u.playChord(t,100,null,20)}analyzeErgonomics(){const e=v.analyzePattern(this.currentPattern),t=document.getElementById("ergoResult");t&&(t.innerHTML=`
        <div class="score-display">
          <div class="score-label">Ergonomic Score</div>
          <div class="score-value">${e.score}</div>
          <div class="score-recommendation">${e.recommendation}</div>
        </div>
        ${e.issues.length>0?`
          <h4>Issues Found:</h4>
          <ul class="issue-list">
            ${e.issues.map(n=>`<li class="issue-item">${this.formatIssue(n)}</li>`).join("")}
          </ul>
        `:'<div class="success-box">No ergonomic issues found!</div>'}
      `)}formatIssue(e){switch(e.type){case"excessive_stretch":return`Excessive stretch between fingers ${e.fingers.join(" and ")} (${e.hand} hand)`;case"uncomfortable_stretch":return`Uncomfortable stretch between fingers ${e.fingers.join(" and ")} (${e.hand} hand)`;case"finger_crossing":return`Possible finger crossing: fingers ${e.fingers.join(" and ")} (${e.hand} hand)`;default:return JSON.stringify(e)}}}document.addEventListener("DOMContentLoaded",()=>{window.app=new J});
